import * as React from 'react';
import { Badge } from 'reactstrap';
import { badgeColor } from 'src/redux/utils/utils';
import { ILog } from 'src/redux/interfaces/logs';

interface IFlowStatusProps {
  log: ILog;
}

const FlowStatus: React.FunctionComponent<IFlowStatusProps> = (props) => {
  const { log } = props;

  const status =
    log.upstream_status || log.proxy_status || log.response?.status_code;

  if (!status) return (
    <>
      {log.error?.msg ? <Badge color="danger">ERR</Badge> : null}
    </>
  );

  return <Badge color={badgeColor(status)}>{status}</Badge>;
};

export default FlowStatus;
